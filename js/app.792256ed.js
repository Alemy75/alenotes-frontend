(function(){"use strict";var e={9621:function(e,t,n){var o=n(9242),s=n(3396);const r={class:"container"},a={class:"header"},i=(0,s._)("div",{class:"logo"},[(0,s._)("h1",null,"Alenote"),(0,s._)("span",null,"Заметки, записи, мысли")],-1),l={class:"container"};function u(e,t,n,o,u,c){const d=(0,s.up)("router-link"),p=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",null,[(0,s._)("div",r,[(0,s._)("section",a,[i,(0,s._)("nav",null,[(0,s.Wm)(d,{class:"a-prim",to:"/"},{default:(0,s.w5)((()=>[(0,s.Uk)("Главная")])),_:1}),this.$store.state.auth.isLogged?((0,s.wg)(),(0,s.j4)(d,{key:0,class:"a-prim",to:"/notes"},{default:(0,s.w5)((()=>[(0,s.Uk)("Заметки")])),_:1})):(0,s.kq)("",!0),this.$store.state.auth.isLogged?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(d,{key:1,class:"a-prim",to:"/login"},{default:(0,s.w5)((()=>[(0,s.Uk)("Войти")])),_:1})),this.$store.state.auth.isLogged?((0,s.wg)(),(0,s.iD)("button",{key:2,onClick:t[0]||(t[0]=(...e)=>c.handleLogout&&c.handleLogout(...e)),class:"a-prim"}," Выйти ")):(0,s.kq)("",!0)])])])]),(0,s._)("div",l,[(0,s.Wm)(p)])],64)}var c=n(65),d={methods:{...(0,c.nv)(["authLogout","checkAuth"]),handleLogout(){this.authLogout()}},mounted(){this.checkAuth()}},p=n(89);const h=(0,p.Z)(d,[["render",u]]);var m=h,f=n(5431);(0,f.z)("/alenotes-frontend/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var g=n(2483);const _=(0,s._)("h1",{class:"title"},"Главная",-1);function w(e,t,n,o,r,a){const i=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[_,(0,s._)("p",null,[(0,s.Uk)("Получить доступ: "),(0,s.Wm)(i,{class:"a-sec",to:"/login"},{default:(0,s.w5)((()=>[(0,s.Uk)("Войти")])),_:1})])],64)}var v={};const b=(0,p.Z)(v,[["render",w]]);var y=b,O=n(7139);const k=e=>((0,s.dD)("data-v-2f329402"),e=e(),(0,s.Cn)(),e),E=k((()=>(0,s._)("h3",null,"Вход в систему",-1))),T=k((()=>(0,s._)("label",{for:"email"},"Почта",-1))),N=k((()=>(0,s._)("label",{for:"password"},"Пароль",-1))),D=k((()=>(0,s._)("button",{class:"button",type:"submit"},"Войти",-1))),L={key:0,class:"error"};function S(e,t,n,r,a,i){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>i.loginHandler&&i.loginHandler(...e)),["prevent"])),onKeydown:t[3]||(t[3]=(0,o.D2)(((...t)=>e.createNote&&e.createNote(...t)),["enter"]))},[E,T,(0,s.wy)((0,s._)("input",{name:"email","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e),placeholder:"Введите почту..."},null,512),[[o.nr,a.email]]),N,(0,s.wy)((0,s._)("input",{type:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),placeholder:"Введите пароль..."},null,512),[[o.nr,a.password]]),D,(0,s._)("span",null,[(0,s.Uk)("Нет аккаунта? "),(0,s.Wm)(l,{to:"/signup"},{default:(0,s.w5)((()=>[(0,s.Uk)("Создать")])),_:1})]),this.$store.state.auth.error?((0,s.wg)(),(0,s.iD)("p",L," Ошибка входа: "+(0,O.zw)(this.$store.state.auth.error),1)):(0,s.kq)("",!0)],32)}var U={data(){return{email:"",password:""}},methods:{...(0,c.nv)(["authLogin"]),async loginHandler(){this.authLogin({email:this.email,password:this.password})}}};const j=(0,p.Z)(U,[["render",S],["__scopeId","data-v-2f329402"]]);var A=j;const G=e=>((0,s.dD)("data-v-c74478ba"),e=e(),(0,s.Cn)(),e),R=G((()=>(0,s._)("h3",null,"Регистрация",-1))),H=G((()=>(0,s._)("label",{for:"email"},"Почта",-1))),x=G((()=>(0,s._)("label",{for:"password"},"Пароль",-1))),F=G((()=>(0,s._)("button",{class:"button",type:"submit"},"Создать аккаунт",-1))),I={key:0,class:"error"};function Z(e,t,n,r,a,i){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>i.signupHandler&&i.signupHandler(...e)),["prevent"])),onKeydown:t[3]||(t[3]=(0,o.D2)(((...t)=>e.createNote&&e.createNote(...t)),["enter"]))},[R,H,(0,s.wy)((0,s._)("input",{name:"email","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e),placeholder:"Введите почту..."},null,512),[[o.nr,a.email]]),x,(0,s.wy)((0,s._)("input",{type:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),placeholder:"Введите пароль..."},null,512),[[o.nr,a.password]]),F,(0,s._)("span",null,[(0,s.Uk)("Уже есть аккаунт? "),(0,s.Wm)(l,{to:"/login"},{default:(0,s.w5)((()=>[(0,s.Uk)("Войти")])),_:1})]),this.$store.state.auth.error?((0,s.wg)(),(0,s.iD)("p",I," Ошибка регистрации: "+(0,O.zw)(this.$store.state.auth.error),1)):(0,s.kq)("",!0)],32)}var M={data(){return{email:"",password:""}},methods:{...(0,c.nv)(["authSignup"]),async signupHandler(){this.authSignup({email:this.email,password:this.password})}}};const $=(0,p.Z)(M,[["render",Z],["__scopeId","data-v-c74478ba"]]);var C=$;const q=(0,s._)("h1",{class:"title"},"Заметки",-1),z=["disabled"];function W(e,t,n,o,r,a){const i=(0,s.up)("form-component"),l=(0,s.up)("notelist-component");return(0,s.wg)(),(0,s.iD)(s.HY,null,[q,this.$store.state.notes.isFormOpen?((0,s.wg)(),(0,s.j4)(i,{key:0})):(0,s.kq)("",!0),(0,s.Wm)(l),(0,s._)("button",{disabled:this.$store.state.notes.isFormOpen,class:"form__open",onClick:t[0]||(t[0]=t=>e.TOGGLE_FORM())}," + ",8,z)],64)}const K={class:"list"};function V(e,t,n,o,r,a){const i=(0,s.up)("note-component");return(0,s.wg)(),(0,s.iD)("section",K,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.$store.state.notes.notes,(e=>((0,s.wg)(),(0,s.j4)(i,{note:e,key:e.id},null,8,["note"])))),128))])}const X={class:"date"};function Y(e,t,n,r,a,i){const l=(0,s.up)("X");return(0,s.wg)(),(0,s.j4)(o.uT,{name:"slide"},{default:(0,s.w5)((()=>[(0,s._)("article",null,[(0,s._)("div",null,[(0,s._)("h2",null,(0,O.zw)(n.note.title),1),(0,s._)("p",null,(0,O.zw)(n.note.content),1),(0,s._)("span",X,(0,O.zw)(n.note.date),1)]),(0,s._)("aside",null,[(0,s._)("span",{class:"delete",onClick:t[0]||(t[0]=t=>e.deleteNote(n.note.id))},[(0,s.Wm)(l)])])])])),_:1})}var J=n(5333),P={components:{X:J.Z},props:{note:{type:Object,required:!0}},methods:{...(0,c.nv)(["getNotes","deleteNote"])}};const B=(0,p.Z)(P,[["render",Y]]);var Q=B,ee={components:{"note-component":Q},methods:{...(0,c.nv)(["getNotes"])},mounted(){this.getNotes()}};const te=(0,p.Z)(ee,[["render",V]]);var ne=te;const oe=e=>((0,s.dD)("data-v-14dbbe66"),e=e(),(0,s.Cn)(),e),se=oe((()=>(0,s._)("div",{class:"overlay"},null,-1))),re={class:"modal__top"},ae=oe((()=>(0,s._)("h3",null,"Создать запись",-1))),ie=oe((()=>(0,s._)("label",{for:"title"},"Название",-1))),le=oe((()=>(0,s._)("label",{for:"content"},"Содержание",-1))),ue=oe((()=>(0,s._)("button",{class:"button",type:"submit"},"Создать запись",-1)));function ce(e,t,n,r,a,i){const l=(0,s.up)("X");return(0,s.wg)(),(0,s.iD)(s.HY,null,[se,(0,s._)("form",{onSubmit:t[4]||(t[4]=(0,o.iM)(((...e)=>i.createNote&&i.createNote(...e)),["prevent"])),onKeydown:t[5]||(t[5]=(0,o.D2)(((...e)=>i.createNote&&i.createNote(...e)),["enter"]))},[(0,s._)("div",re,[ae,(0,s._)("span",{class:"delete",onClick:t[0]||(t[0]=t=>e.TOGGLE_FORM())},[(0,s.Wm)(l)])]),ie,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.title=e),placeholder:"Введите название..",type:"text"},null,512),[[o.nr,a.title]]),le,(0,s.wy)((0,s._)("textarea",{ref:"textarea","onUpdate:modelValue":t[2]||(t[2]=e=>a.content=e),placeholder:"Введите текст..",onInput:t[3]||(t[3]=(...e)=>i.resizeTextarea&&i.resizeTextarea(...e)),type:"text"},null,544),[[o.nr,a.content]]),ue],32)],64)}var de={components:{X:J.Z},data(){return{title:"",content:""}},methods:{...(0,c.nv)(["addNote"]),...(0,c.OI)(["TOGGLE_FORM"]),async createNote(){const e={title:this.title,content:this.content,date:(new Date).toLocaleString()};this.addNote(e),this.title="",this.content="",this.TOGGLE_FORM();const t=this.$refs.textarea;t.style.height=""},resizeTextarea(){const e=this.$refs.textarea;e.style.height="auto",e.style.height=e.scrollHeight+"px"}}};const pe=(0,p.Z)(de,[["render",ce],["__scopeId","data-v-14dbbe66"]]);var he=pe,me={components:{"form-component":he,"notelist-component":ne},methods:{...(0,c.OI)(["TOGGLE_FORM"])}};const fe=(0,p.Z)(me,[["render",W]]);var ge=fe,_e=n(3866);const we=[{path:"/",name:"home",component:y},{path:"/login",name:"login",component:A},{path:"/signup",name:"signup",component:C},{path:"/notes",name:"notes",component:ge,meta:{requiresAuth:!0}}],ve=(0,g.p7)({history:(0,g.PO)("/alenotes-frontend/"),routes:we}),be=()=>new Promise(((e,t)=>{const n=(0,_e.Aj)((0,_e.v0)(),(t=>{n(),e(t)}),t)}));ve.beforeEach((async(e,t,n)=>{e.matched.some((e=>e.meta.requiresAuth))?await be()?n():(alert("No access"),n("/")):n()}));var ye=ve,Oe=(n(7658),n(7795)),ke=n(9365),Ee=n(4287);const Te={apiKey:"AIzaSyD6ygZjN0JtvGQhLK5hxlw5RtunBjACb3Y",authDomain:"willberries-3389e.firebaseapp.com",databaseURL:"https://willberries-3389e-default-rtdb.firebaseio.com",projectId:"willberries-3389e",storageBucket:"willberries-3389e.appspot.com",messagingSenderId:"858341095624",appId:"1:858341095624:web:9e129be2005ebffb304dfd",measurementId:"G-RZ8NTJ90M1"},Ne=(0,Oe.ZF)(Te),De=((0,ke.IH)(Ne),(0,Ee.ad)());var Le=De;const Se={state:{notes:[],isFormOpen:!1},mutations:{SET_NOTES(e,t){e.notes=t},DELETE_NOTE(e,t){e.notes=e.notes.filter((e=>e.id!==t))},ADD_NOTE(e,t){e.notes.push({id:t.id,...t.dataObj})},TOGGLE_FORM(e){e.isFormOpen=!e.isFormOpen}},actions:{async getNotes({commit:e}){const t=(0,_e.v0)(),n=(0,Ee.IO)((0,Ee.hJ)(Le,"notes"),(0,Ee.Xo)("date","desc"),(0,Ee.ar)("uid","==",t.currentUser.uid)),o=await(0,Ee.PL)(n),s=[];o.forEach((e=>{s.push({id:e.id,...e.data()})})),e("SET_NOTES",s)},async deleteNote({commit:e},t){const n=(0,Ee.JU)(Le,"notes",t);await(0,Ee.oe)(n),e("DELETE_NOTE",t)},async addNote({commit:e},t){const n=(0,_e.v0)(),o=(0,Ee.hJ)(Le,"notes"),s=await(0,Ee.ET)(o,{uid:n.currentUser.uid,...t});e("ADD_NOTE",{id:s.id,uid:n.currentUser.uid,dataObj:t})}},getters:{}};var Ue=Se;const je={state:{isLogged:!1,error:null,auth:(0,_e.v0)()},mutations:{SET_IS_LOGGED(e,t){e.isLogged=t},SET_ERROR(e,t){e.error=t},SET_AUTH(e,t){e.auth=t}},actions:{async authLogin({commit:e,state:t},n){e("SET_AUTH",(0,_e.v0)()),(0,_e.e5)(t.auth,n.email,n.password).then((e=>{console.log(t.auth.currentUser),ye.push("/notes")})).catch((t=>{e("SET_ERROR",t.code)}))},async authSignup({commit:e,state:t},n){e("SET_AUTH",(0,_e.v0)()),(0,_e.Xb)(t.auth,n.email,n.password).then((e=>{console.log(e)})).catch((t=>{e("SET_ERROR",t.code)}))},async checkAuth({commit:e,state:t}){e("SET_AUTH",(0,_e.v0)()),(0,_e.Aj)(t.auth,(t=>{e("SET_IS_LOGGED",!!t)}))},async authLogout({state:e}){(0,_e.w7)(e.auth).then((()=>{ye.push("/")}))}},getters:{}};var Ae=je,Ge=(0,c.MT)({modules:{notes:Ue,auth:Ae}});(0,o.ri)(m).use(Ge).use(ye).mount("#app")}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,r){if(!o){var a=1/0;for(c=0;c<e.length;c++){o=e[c][0],s=e[c][1],r=e[c][2];for(var i=!0,l=0;l<o.length;l++)(!1&r||a>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(i=!1,r<a&&(a=r));if(i){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,s,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,r,a=o[0],i=o[1],l=o[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(l)var c=l(n)}for(t&&t(o);u<a.length;u++)r=a[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},o=self["webpackChunkvue_notes"]=self["webpackChunkvue_notes"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(9621)}));o=n.O(o)})();
//# sourceMappingURL=app.792256ed.js.map