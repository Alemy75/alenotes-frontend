(function(){"use strict";var e={1302:function(e,t,n){var o=n(9242),s=n(3396);const a={class:"container"},r={class:"header"},i=(0,s._)("div",{class:"logo"},[(0,s._)("h1",null,"Alenote"),(0,s._)("span",null,"Заметки, записи, мысли")],-1),l={class:"container"};function u(e,t,n,o,u,c){const d=(0,s.up)("router-link"),p=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",null,[(0,s._)("div",a,[(0,s._)("section",r,[i,(0,s._)("nav",null,[(0,s.Wm)(d,{class:"a-prim",to:"/"},{default:(0,s.w5)((()=>[(0,s.Uk)("Главная")])),_:1}),this.$store.state.auth.isLogged?((0,s.wg)(),(0,s.j4)(d,{key:0,class:"a-prim",to:"/notes"},{default:(0,s.w5)((()=>[(0,s.Uk)("Заметки")])),_:1})):(0,s.kq)("",!0),this.$store.state.auth.isLogged?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(d,{key:1,class:"a-prim",to:"/login"},{default:(0,s.w5)((()=>[(0,s.Uk)("Войти")])),_:1})),this.$store.state.auth.isLogged?((0,s.wg)(),(0,s.iD)("button",{key:2,onClick:t[0]||(t[0]=(...e)=>c.handleLogout&&c.handleLogout(...e)),class:"a-prim"}," Выйти ")):(0,s.kq)("",!0)])])])]),(0,s._)("div",l,[(0,s.Wm)(p)])],64)}var c=n(65),d={methods:{...(0,c.nv)(["authLogout","checkAuth"]),handleLogout(){this.authLogout()}},mounted(){this.checkAuth()}},p=n(89);const h=(0,p.Z)(d,[["render",u]]);var m=h,g=n(5431);(0,g.z)("/alenotes-frontend/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var f=n(2483);const w=(0,s._)("h1",{class:"title"},"Главная",-1),_={key:0},v={key:1};function b(e,t,n,o,a,r){const i=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[w,this.$store.state.auth.isLogged?((0,s.wg)(),(0,s.iD)("p",v,"Вы уже авторизованы!")):((0,s.wg)(),(0,s.iD)("p",_,[(0,s.Uk)("Получить доступ: "),(0,s.Wm)(i,{class:"a-sec",to:"/login"},{default:(0,s.w5)((()=>[(0,s.Uk)("Войти")])),_:1})]))],64)}var y={};const k=(0,p.Z)(y,[["render",b]]);var O=k,E=n(7139);const T=e=>((0,s.dD)("data-v-2f329402"),e=e(),(0,s.Cn)(),e),N=T((()=>(0,s._)("h3",null,"Вход в систему",-1))),D=T((()=>(0,s._)("label",{for:"email"},"Почта",-1))),L=T((()=>(0,s._)("label",{for:"password"},"Пароль",-1))),S=T((()=>(0,s._)("button",{class:"button",type:"submit"},"Войти",-1))),U={key:0,class:"error"};function j(e,t,n,a,r,i){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>i.loginHandler&&i.loginHandler(...e)),["prevent"])),onKeydown:t[3]||(t[3]=(0,o.D2)(((...t)=>e.createNote&&e.createNote(...t)),["enter"]))},[N,D,(0,s.wy)((0,s._)("input",{name:"email","onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e),placeholder:"Введите почту..."},null,512),[[o.nr,r.email]]),L,(0,s.wy)((0,s._)("input",{type:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),placeholder:"Введите пароль..."},null,512),[[o.nr,r.password]]),S,(0,s._)("span",null,[(0,s.Uk)("Нет аккаунта? "),(0,s.Wm)(l,{to:"/signup"},{default:(0,s.w5)((()=>[(0,s.Uk)("Создать")])),_:1})]),this.$store.state.auth.error?((0,s.wg)(),(0,s.iD)("p",U," Ошибка входа: "+(0,E.zw)(this.$store.state.auth.error),1)):(0,s.kq)("",!0)],32)}var A={data(){return{email:"",password:""}},methods:{...(0,c.nv)(["authLogin"]),async loginHandler(){this.authLogin({email:this.email,password:this.password})}}};const G=(0,p.Z)(A,[["render",j],["__scopeId","data-v-2f329402"]]);var R=G;const H=e=>((0,s.dD)("data-v-c74478ba"),e=e(),(0,s.Cn)(),e),x=H((()=>(0,s._)("h3",null,"Регистрация",-1))),F=H((()=>(0,s._)("label",{for:"email"},"Почта",-1))),I=H((()=>(0,s._)("label",{for:"password"},"Пароль",-1))),Z=H((()=>(0,s._)("button",{class:"button",type:"submit"},"Создать аккаунт",-1))),$={key:0,class:"error"};function M(e,t,n,a,r,i){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>i.signupHandler&&i.signupHandler(...e)),["prevent"])),onKeydown:t[3]||(t[3]=(0,o.D2)(((...t)=>e.createNote&&e.createNote(...t)),["enter"]))},[x,F,(0,s.wy)((0,s._)("input",{name:"email","onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e),placeholder:"Введите почту..."},null,512),[[o.nr,r.email]]),I,(0,s.wy)((0,s._)("input",{type:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),placeholder:"Введите пароль..."},null,512),[[o.nr,r.password]]),Z,(0,s._)("span",null,[(0,s.Uk)("Уже есть аккаунт? "),(0,s.Wm)(l,{to:"/login"},{default:(0,s.w5)((()=>[(0,s.Uk)("Войти")])),_:1})]),this.$store.state.auth.error?((0,s.wg)(),(0,s.iD)("p",$," Ошибка регистрации: "+(0,E.zw)(this.$store.state.auth.error),1)):(0,s.kq)("",!0)],32)}var C={data(){return{email:"",password:""}},methods:{...(0,c.nv)(["authSignup"]),async signupHandler(){this.authSignup({email:this.email,password:this.password})}}};const q=(0,p.Z)(C,[["render",M],["__scopeId","data-v-c74478ba"]]);var z=q;const W=(0,s._)("h1",{class:"title"},"Заметки",-1),K=["disabled"];function V(e,t,n,o,a,r){const i=(0,s.up)("form-component"),l=(0,s.up)("notelist-component");return(0,s.wg)(),(0,s.iD)(s.HY,null,[W,this.$store.state.notes.isFormOpen?((0,s.wg)(),(0,s.j4)(i,{key:0})):(0,s.kq)("",!0),(0,s.Wm)(l),(0,s._)("button",{disabled:this.$store.state.notes.isFormOpen,class:"form__open",onClick:t[0]||(t[0]=t=>e.TOGGLE_FORM())}," + ",8,K)],64)}const X={class:"list"};function Y(e,t,n,o,a,r){const i=(0,s.up)("note-component");return(0,s.wg)(),(0,s.iD)("section",X,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.$store.state.notes.notes,(e=>((0,s.wg)(),(0,s.j4)(i,{note:e,key:e.id},null,8,["note"])))),128))])}const J={class:"date"};function P(e,t,n,a,r,i){const l=(0,s.up)("X");return(0,s.wg)(),(0,s.j4)(o.uT,{name:"slide"},{default:(0,s.w5)((()=>[(0,s._)("article",null,[(0,s._)("div",null,[(0,s._)("h2",null,(0,E.zw)(n.note.title),1),(0,s._)("p",null,(0,E.zw)(n.note.content),1),(0,s._)("span",J,(0,E.zw)(n.note.date),1)]),(0,s._)("aside",null,[(0,s._)("span",{class:"delete",onClick:t[0]||(t[0]=t=>e.deleteNote(n.note.id))},[(0,s.Wm)(l)])])])])),_:1})}var B=n(5333),Q={components:{X:B.Z},props:{note:{type:Object,required:!0}},methods:{...(0,c.nv)(["getNotes","deleteNote"])}};const ee=(0,p.Z)(Q,[["render",P]]);var te=ee,ne={components:{"note-component":te},methods:{...(0,c.nv)(["getNotes"])},mounted(){this.getNotes()}};const oe=(0,p.Z)(ne,[["render",Y]]);var se=oe;const ae=e=>((0,s.dD)("data-v-14dbbe66"),e=e(),(0,s.Cn)(),e),re=ae((()=>(0,s._)("div",{class:"overlay"},null,-1))),ie={class:"modal__top"},le=ae((()=>(0,s._)("h3",null,"Создать запись",-1))),ue=ae((()=>(0,s._)("label",{for:"title"},"Название",-1))),ce=ae((()=>(0,s._)("label",{for:"content"},"Содержание",-1))),de=ae((()=>(0,s._)("button",{class:"button",type:"submit"},"Создать запись",-1)));function pe(e,t,n,a,r,i){const l=(0,s.up)("X");return(0,s.wg)(),(0,s.iD)(s.HY,null,[re,(0,s._)("form",{onSubmit:t[4]||(t[4]=(0,o.iM)(((...e)=>i.createNote&&i.createNote(...e)),["prevent"])),onKeydown:t[5]||(t[5]=(0,o.D2)(((...e)=>i.createNote&&i.createNote(...e)),["enter"]))},[(0,s._)("div",ie,[le,(0,s._)("span",{class:"delete",onClick:t[0]||(t[0]=t=>e.TOGGLE_FORM())},[(0,s.Wm)(l)])]),ue,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.title=e),placeholder:"Введите название..",type:"text"},null,512),[[o.nr,r.title]]),ce,(0,s.wy)((0,s._)("textarea",{ref:"textarea","onUpdate:modelValue":t[2]||(t[2]=e=>r.content=e),placeholder:"Введите текст..",onInput:t[3]||(t[3]=(...e)=>i.resizeTextarea&&i.resizeTextarea(...e)),type:"text"},null,544),[[o.nr,r.content]]),de],32)],64)}var he={components:{X:B.Z},data(){return{title:"",content:""}},methods:{...(0,c.nv)(["addNote"]),...(0,c.OI)(["TOGGLE_FORM"]),async createNote(){const e={title:this.title,content:this.content,date:(new Date).toLocaleString()};this.addNote(e),this.title="",this.content="",this.TOGGLE_FORM();const t=this.$refs.textarea;t.style.height=""},resizeTextarea(){const e=this.$refs.textarea;e.style.height="auto",e.style.height=e.scrollHeight+"px"}}};const me=(0,p.Z)(he,[["render",pe],["__scopeId","data-v-14dbbe66"]]);var ge=me,fe={components:{"form-component":ge,"notelist-component":se},methods:{...(0,c.OI)(["TOGGLE_FORM"])}};const we=(0,p.Z)(fe,[["render",V]]);var _e=we,ve=n(3866);const be=[{path:"/",name:"home",component:O},{path:"/login",name:"login",component:R},{path:"/signup",name:"signup",component:z},{path:"/notes",name:"notes",component:_e,meta:{requiresAuth:!0}}],ye=(0,f.p7)({history:(0,f.PO)("/alenotes-frontend/"),routes:be}),ke=()=>new Promise(((e,t)=>{const n=(0,ve.Aj)((0,ve.v0)(),(t=>{n(),e(t)}),t)}));ye.beforeEach((async(e,t,n)=>{e.matched.some((e=>e.meta.requiresAuth))?await ke()?n():(alert("No access"),n("/")):n()}));var Oe=ye,Ee=(n(7658),n(7795)),Te=n(9365),Ne=n(4287);const De={apiKey:"AIzaSyD6ygZjN0JtvGQhLK5hxlw5RtunBjACb3Y",authDomain:"willberries-3389e.firebaseapp.com",databaseURL:"https://willberries-3389e-default-rtdb.firebaseio.com",projectId:"willberries-3389e",storageBucket:"willberries-3389e.appspot.com",messagingSenderId:"858341095624",appId:"1:858341095624:web:9e129be2005ebffb304dfd",measurementId:"G-RZ8NTJ90M1"},Le=(0,Ee.ZF)(De),Se=((0,Te.IH)(Le),(0,Ne.ad)());var Ue=Se;const je={state:{notes:[],isFormOpen:!1},mutations:{SET_NOTES(e,t){e.notes=t},DELETE_NOTE(e,t){e.notes=e.notes.filter((e=>e.id!==t))},ADD_NOTE(e,t){e.notes.push({id:t.id,...t.dataObj})},TOGGLE_FORM(e){e.isFormOpen=!e.isFormOpen}},actions:{async getNotes({commit:e}){const t=(0,ve.v0)(),n=(0,Ne.IO)((0,Ne.hJ)(Ue,"notes"),(0,Ne.Xo)("date","desc"),(0,Ne.ar)("uid","==",t.currentUser.uid)),o=await(0,Ne.PL)(n),s=[];o.forEach((e=>{s.push({id:e.id,...e.data()})})),e("SET_NOTES",s)},async deleteNote({commit:e},t){const n=(0,Ne.JU)(Ue,"notes",t);await(0,Ne.oe)(n),e("DELETE_NOTE",t)},async addNote({commit:e},t){const n=(0,ve.v0)(),o=(0,Ne.hJ)(Ue,"notes"),s=await(0,Ne.ET)(o,{uid:n.currentUser.uid,...t});e("ADD_NOTE",{id:s.id,uid:n.currentUser.uid,dataObj:t})}},getters:{}};var Ae=je;const Ge={state:{isLogged:!1,error:null,auth:(0,ve.v0)()},mutations:{SET_IS_LOGGED(e,t){e.isLogged=t},SET_ERROR(e,t){e.error=t},SET_AUTH(e,t){e.auth=t}},actions:{async authLogin({commit:e,state:t},n){e("SET_AUTH",(0,ve.v0)()),(0,ve.e5)(t.auth,n.email,n.password).then((e=>{console.log(t.auth.currentUser),Oe.push("/notes")})).catch((t=>{e("SET_ERROR",t.code)}))},async authSignup({commit:e,state:t},n){e("SET_AUTH",(0,ve.v0)()),(0,ve.Xb)(t.auth,n.email,n.password).then((e=>{Oe.push("/notes")})).catch((t=>{e("SET_ERROR",t.code)}))},async checkAuth({commit:e,state:t}){e("SET_AUTH",(0,ve.v0)()),(0,ve.Aj)(t.auth,(t=>{e("SET_IS_LOGGED",!!t)}))},async authLogout({state:e}){(0,ve.w7)(e.auth).then((()=>{Oe.push("/")}))}},getters:{}};var Re=Ge,He=(0,c.MT)({modules:{notes:Ae,auth:Re}});(0,o.ri)(m).use(He).use(Oe).mount("#app")}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,a){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],s=e[c][1],a=e[c][2];for(var i=!0,l=0;l<o.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(i=!1,a<r&&(r=a));if(i){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,s,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,a,r=o[0],i=o[1],l=o[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(l)var c=l(n)}for(t&&t(o);u<r.length;u++)a=r[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},o=self["webpackChunkvue_notes"]=self["webpackChunkvue_notes"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(1302)}));o=n.O(o)})();
//# sourceMappingURL=app.46b480bd.js.map