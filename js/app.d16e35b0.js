(function(){"use strict";var e={1334:function(e,t,n){var o=n(9242),s=n(3396);const a={class:"container"};function r(e,t,n,o,r,i){const l=(0,s.up)("nav-component"),c=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(l),(0,s._)("div",a,[(0,s.Wm)(c)])],64)}const i=e=>((0,s.dD)("data-v-ee5d2cba"),e=e(),(0,s.Cn)(),e),l={class:"container header_container"},c={class:"header"},u=i((()=>(0,s._)("div",{class:"logo"},[(0,s._)("h1",null,"Alenote"),(0,s._)("span",null,"Заметки, записи, мысли")],-1))),d=i((()=>(0,s._)("span",null,null,-1))),p=i((()=>(0,s._)("span",null,null,-1))),h=i((()=>(0,s._)("span",null,null,-1))),m=[d,p,h],g={key:0};function f(e,t,n,o,a,r){const i=(0,s.up)("Blinds"),d=(0,s.up)("router-link"),p=(0,s.up)("PenSquare"),h=(0,s.up)("LogOut");return(0,s.wg)(),(0,s.iD)("header",null,[(0,s._)("div",l,[(0,s._)("section",c,[u,(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>r.toggleNav&&r.toggleNav(...e)),class:"header__button"},m)]),a.isNavOpen?((0,s.wg)(),(0,s.iD)("nav",g,[(0,s.Wm)(d,{onClick:t[1]||(t[1]=e=>r.toggleNav()),class:"a-prim",to:"/"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{size:"15px"}),(0,s.Uk)(" Главная ")])),_:1}),this.$store.state.auth.isLogged?((0,s.wg)(),(0,s.j4)(d,{key:0,onClick:t[2]||(t[2]=e=>r.toggleNav()),class:"a-prim",to:"/notes"},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{size:"15px"}),(0,s.Uk)(" Заметки ")])),_:1})):(0,s.kq)("",!0),this.$store.state.auth.isLogged?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(d,{key:1,onClick:t[3]||(t[3]=e=>r.toggleNav()),class:"a-prim",to:"/login"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{size:"15px"}),(0,s.Uk)(" Войти ")])),_:1})),this.$store.state.auth.isLogged?((0,s.wg)(),(0,s.iD)("button",{key:2,onClick:t[4]||(t[4]=(...e)=>r.handleLogout&&r.handleLogout(...e)),class:"a-prim"},[(0,s.Wm)(h,{size:"15px"}),(0,s.Uk)(" Выйти ")])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])])}var v=n(65),_=n(4775),w=n(3948),b=n(4438),k=n(5560),y={components:{Blinds:_.Z,PenSquare:w.Z,LogIn:b.Z,LogOut:k.Z},data(){return{isNavOpen:!1}},methods:{...(0,v.nv)(["authLogout","checkAuth"]),handleLogout(){this.authLogout(),this.toggleNav()},toggleNav(){this.isNavOpen=!this.isNavOpen}},mounted(){this.checkAuth()}},O=n(89);const E=(0,O.Z)(y,[["render",f],["__scopeId","data-v-ee5d2cba"]]);var N=E,T={components:{"nav-component":N}};const D=(0,O.Z)(T,[["render",r]]);var L=D,x=n(5431);(0,x.z)("/alenotes-frontend/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var S=n(2483);const U=(0,s._)("h1",{class:"title"},"Главная",-1),C={key:0},H={key:1};function j(e,t,n,o,a,r){const i=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[U,this.$store.state.auth.isLogged?((0,s.wg)(),(0,s.iD)("p",H,"Вы уже авторизованы!")):((0,s.wg)(),(0,s.iD)("p",C,[(0,s.Uk)("Получить доступ: "),(0,s.Wm)(i,{class:"a-sec",to:"/login"},{default:(0,s.w5)((()=>[(0,s.Uk)("Войти")])),_:1})]))],64)}var z={};const Z=(0,O.Z)(z,[["render",j]]);var A=Z,I=n(7139);const G=e=>((0,s.dD)("data-v-0b7a0622"),e=e(),(0,s.Cn)(),e),R=G((()=>(0,s._)("h3",null,"Вход в систему",-1))),F=G((()=>(0,s._)("label",{for:"email"},"Почта",-1))),q=G((()=>(0,s._)("label",{for:"password"},"Пароль",-1))),W=G((()=>(0,s._)("button",{class:"button",type:"submit"},"Войти",-1))),$={key:0,class:"error"};function M(e,t,n,a,r,i){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>i.loginHandler&&i.loginHandler(...e)),["prevent"])),onKeydown:t[3]||(t[3]=(0,o.D2)(((...t)=>e.createNote&&e.createNote(...t)),["enter"]))},[R,F,(0,s.wy)((0,s._)("input",{class:"input",name:"email","onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e),placeholder:"Введите почту..."},null,512),[[o.nr,r.email]]),q,(0,s.wy)((0,s._)("input",{class:"input",type:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),placeholder:"Введите пароль..."},null,512),[[o.nr,r.password]]),W,(0,s._)("span",null,[(0,s.Uk)("Нет аккаунта? "),(0,s.Wm)(l,{to:"/signup"},{default:(0,s.w5)((()=>[(0,s.Uk)("Создать")])),_:1})]),this.$store.state.auth.error?((0,s.wg)(),(0,s.iD)("p",$," Ошибка входа: "+(0,I.zw)(this.$store.state.auth.error),1)):(0,s.kq)("",!0)],32)}var P={data(){return{email:"",password:""}},methods:{...(0,v.nv)(["authLogin"]),async loginHandler(){this.authLogin({email:this.email,password:this.password})}}};const V=(0,O.Z)(P,[["render",M],["__scopeId","data-v-0b7a0622"]]);var J=V;const K=e=>((0,s.dD)("data-v-3f2f7803"),e=e(),(0,s.Cn)(),e),X=K((()=>(0,s._)("h3",null,"Регистрация",-1))),Y=K((()=>(0,s._)("label",{for:"email"},"Почта",-1))),B=K((()=>(0,s._)("label",{for:"password"},"Пароль",-1))),Q=K((()=>(0,s._)("button",{class:"button",type:"submit"},"Создать аккаунт",-1))),ee={key:0,class:"error"};function te(e,t,n,a,r,i){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>i.signupHandler&&i.signupHandler(...e)),["prevent"])),onKeydown:t[3]||(t[3]=(0,o.D2)(((...t)=>e.createNote&&e.createNote(...t)),["enter"]))},[X,Y,(0,s.wy)((0,s._)("input",{class:"input",name:"email","onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e),placeholder:"Введите почту..."},null,512),[[o.nr,r.email]]),B,(0,s.wy)((0,s._)("input",{class:"input",type:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),placeholder:"Введите пароль..."},null,512),[[o.nr,r.password]]),Q,(0,s._)("span",null,[(0,s.Uk)("Уже есть аккаунт? "),(0,s.Wm)(l,{to:"/login"},{default:(0,s.w5)((()=>[(0,s.Uk)("Войти")])),_:1})]),this.$store.state.auth.error?((0,s.wg)(),(0,s.iD)("p",ee," Ошибка регистрации: "+(0,I.zw)(this.$store.state.auth.error),1)):(0,s.kq)("",!0)],32)}var ne={data(){return{email:"",password:""}},methods:{...(0,v.nv)(["authSignup"]),async signupHandler(){this.authSignup({email:this.email,password:this.password})}}};const oe=(0,O.Z)(ne,[["render",te],["__scopeId","data-v-3f2f7803"]]);var se=oe;const ae=(0,s._)("h1",{class:"title"},"Заметки",-1),re=["disabled"];function ie(e,t,n,o,a,r){const i=(0,s.up)("form-component"),l=(0,s.up)("notelist-component");return(0,s.wg)(),(0,s.iD)(s.HY,null,[ae,this.$store.state.notes.isFormOpen?((0,s.wg)(),(0,s.j4)(i,{key:0})):(0,s.kq)("",!0),(0,s.Wm)(l),(0,s._)("button",{disabled:this.$store.state.notes.isFormOpen,class:"form__open",onClick:t[0]||(t[0]=t=>e.TOGGLE_FORM())}," + ",8,re)],64)}const le={class:"list"};function ce(e,t,n,o,a,r){const i=(0,s.up)("note-component");return(0,s.wg)(),(0,s.iD)("section",le,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.$store.state.notes.notes,(e=>((0,s.wg)(),(0,s.j4)(i,{note:e,key:e.id},null,8,["note"])))),128))])}const ue=["readonly"],de={class:"date"};function pe(e,t,n,a,r,i){const l=(0,s.up)("X"),c=(0,s.up)("FileEdit"),u=(0,s.up)("CheckCheck");return(0,s.wg)(),(0,s.j4)(o.uT,{name:"slide"},{default:(0,s.w5)((()=>[(0,s._)("article",null,[(0,s._)("div",null,[(0,s._)("h2",null,(0,I.zw)(n.note.title),1),(0,s.wy)((0,s._)("textarea",{ref:"textarea",class:(0,I.C_)({textarea:r.isEditing}),readonly:!r.isEditing,"onUpdate:modelValue":t[0]||(t[0]=e=>this.content=e)},(0,I.zw)(n.note.content),11,ue),[[o.nr,this.content]]),(0,s._)("span",de,(0,I.zw)(n.note.date),1)]),(0,s._)("aside",null,[(0,s._)("button",{class:"icon-btn",onClick:t[1]||(t[1]=t=>e.deleteNote(n.note.id))},[(0,s.Wm)(l,{size:"20px"})]),r.isEditing?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:0,class:"icon-btn",onClick:t[2]||(t[2]=(...e)=>i.editHandler&&i.editHandler(...e))},[(0,s.Wm)(c,{size:"20px","stroke-width":1.7})])),r.isEditing?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"icon-btn",onClick:t[3]||(t[3]=e=>i.updateHandler(n.note.id))},[(0,s.Wm)(u,{"stroke-width":1.5})])):(0,s.kq)("",!0)])])])),_:1})}var he=n(4341),me=n(2810),ge=n(6522),fe={components:{X:he.Z,FileEdit:me.Z,CheckCheck:ge.Z},props:{note:{type:Object,required:!0}},data(){return{isEditing:!1,content:this.note.content}},methods:{...(0,v.nv)(["getNotes","deleteNote","updateNote"]),resizeTextarea(){const e=this.$refs.textarea;e.style.height="auto",e.style.height=e.scrollHeight+"px"},editHandler(){this.isEditing=!0,this.resizeTextarea()},updateHandler(e){this.updateNote({id:e,content:this.content}).then((()=>{this.isEditing=!1})),this.resizeTextarea()}},mounted(){this.resizeTextarea()}};const ve=(0,O.Z)(fe,[["render",pe]]);var _e=ve,we={components:{"note-component":_e},methods:{...(0,v.nv)(["getNotes"])},mounted(){this.getNotes()}};const be=(0,O.Z)(we,[["render",ce]]);var ke=be;const ye=e=>((0,s.dD)("data-v-adb4b8dc"),e=e(),(0,s.Cn)(),e),Oe=ye((()=>(0,s._)("div",{class:"overlay"},null,-1))),Ee={class:"modal__top"},Ne=ye((()=>(0,s._)("h3",null,"Создать запись",-1))),Te=ye((()=>(0,s._)("label",{for:"title"},"Название",-1))),De=ye((()=>(0,s._)("label",{for:"content"},"Содержание",-1))),Le=ye((()=>(0,s._)("button",{class:"button",type:"submit"},"Создать запись",-1)));function xe(e,t,n,a,r,i){const l=(0,s.up)("X");return(0,s.wg)(),(0,s.iD)(s.HY,null,[Oe,(0,s._)("form",{onSubmit:t[4]||(t[4]=(0,o.iM)(((...e)=>i.createNote&&i.createNote(...e)),["prevent"])),onKeydown:t[5]||(t[5]=(0,o.D2)(((...e)=>i.createNote&&i.createNote(...e)),["enter"]))},[(0,s._)("div",Ee,[Ne,(0,s._)("span",{class:"delete",onClick:t[0]||(t[0]=t=>e.TOGGLE_FORM())},[(0,s.Wm)(l)])]),Te,(0,s.wy)((0,s._)("input",{class:"input","onUpdate:modelValue":t[1]||(t[1]=e=>r.title=e),placeholder:"Введите название..",type:"text"},null,512),[[o.nr,r.title]]),De,(0,s.wy)((0,s._)("textarea",{class:"textarea",ref:"textarea","onUpdate:modelValue":t[2]||(t[2]=e=>r.content=e),placeholder:"Введите текст..",onInput:t[3]||(t[3]=(...e)=>i.resizeTextarea&&i.resizeTextarea(...e)),type:"text"},null,544),[[o.nr,r.content]]),Le],32)],64)}var Se={components:{X:he.Z},data(){return{title:"",content:""}},methods:{...(0,v.nv)(["addNote"]),...(0,v.OI)(["TOGGLE_FORM"]),async createNote(){const e={title:this.title,content:this.content,date:(new Date).toLocaleString()};this.addNote(e),this.title="",this.content="",this.TOGGLE_FORM();const t=this.$refs.textarea;t.style.height=""},resizeTextarea(){const e=this.$refs.textarea;e.style.height="auto",e.style.height=e.scrollHeight+"px"}}};const Ue=(0,O.Z)(Se,[["render",xe],["__scopeId","data-v-adb4b8dc"]]);var Ce=Ue,He={components:{"form-component":Ce,"notelist-component":ke},methods:{...(0,v.OI)(["TOGGLE_FORM"])}};const je=(0,O.Z)(He,[["render",ie]]);var ze=je,Ze=n(3866);const Ae=[{path:"/",name:"home",component:A},{path:"/login",name:"login",component:J},{path:"/signup",name:"signup",component:se},{path:"/notes",name:"notes",component:ze,meta:{requiresAuth:!0}}],Ie=(0,S.p7)({history:(0,S.PO)("/alenotes-frontend/"),routes:Ae}),Ge=()=>new Promise(((e,t)=>{const n=(0,Ze.Aj)((0,Ze.v0)(),(t=>{n(),e(t)}),t)}));Ie.beforeEach((async(e,t,n)=>{e.matched.some((e=>e.meta.requiresAuth))?await Ge()?n():(alert("No access"),n("/")):n()}));var Re=Ie,Fe=(n(7658),n(7795)),qe=n(9365),We=n(4287);const $e={apiKey:"AIzaSyD6ygZjN0JtvGQhLK5hxlw5RtunBjACb3Y",authDomain:"willberries-3389e.firebaseapp.com",databaseURL:"https://willberries-3389e-default-rtdb.firebaseio.com",projectId:"willberries-3389e",storageBucket:"willberries-3389e.appspot.com",messagingSenderId:"858341095624",appId:"1:858341095624:web:9e129be2005ebffb304dfd",measurementId:"G-RZ8NTJ90M1"},Me=(0,Fe.ZF)($e),Pe=((0,qe.IH)(Me),(0,We.ad)());var Ve=Pe;const Je={state:{notes:[],isFormOpen:!1},mutations:{SET_NOTES(e,t){e.notes=t},DELETE_NOTE(e,t){e.notes=e.notes.filter((e=>e.id!==t))},ADD_NOTE(e,t){e.notes.push({id:t.id,...t.dataObj})},TOGGLE_FORM(e){e.isFormOpen=!e.isFormOpen},EDIT_NOTE(e,t){const n=e.notes.find((e=>e.id===t.id));n&&(n.content=t.content,n.date=t.date)}},actions:{async getNotes({commit:e}){const t=(0,Ze.v0)(),n=(0,We.IO)((0,We.hJ)(Ve,"notes"),(0,We.Xo)("date","desc"),(0,We.ar)("uid","==",t.currentUser.uid)),o=await(0,We.PL)(n),s=[];o.forEach((e=>{s.push({id:e.id,...e.data()})})),e("SET_NOTES",s)},async deleteNote({commit:e},t){const n=(0,We.JU)(Ve,"notes",t);await(0,We.oe)(n),e("DELETE_NOTE",t)},async addNote({commit:e},t){const n=(0,Ze.v0)(),o=(0,We.hJ)(Ve,"notes"),s=await(0,We.ET)(o,{uid:n.currentUser.uid,...t});e("ADD_NOTE",{id:s.id,uid:n.currentUser.uid,dataObj:t})},async updateNote({commit:e},t){const n=(0,We.JU)(Ve,"notes",t.id);let o=(new Date).toLocaleString();await(0,We.pl)(n,{content:t.content,date:o},{merge:!0});let s={id:t.id,content:t.content,date:o};e("EDIT_NOTE",s)}},getters:{}};var Ke=Je;const Xe={state:{isLogged:!1,error:null,auth:(0,Ze.v0)()},mutations:{SET_IS_LOGGED(e,t){e.isLogged=t},SET_ERROR(e,t){e.error=t},SET_AUTH(e,t){e.auth=t}},actions:{async authLogin({commit:e,state:t},n){e("SET_AUTH",(0,Ze.v0)()),(0,Ze.e5)(t.auth,n.email,n.password).then((e=>{console.log(t.auth.currentUser),Re.push("/notes")})).catch((t=>{e("SET_ERROR",t.code)}))},async authSignup({commit:e,state:t},n){e("SET_AUTH",(0,Ze.v0)()),(0,Ze.Xb)(t.auth,n.email,n.password).then((e=>{Re.push("/notes")})).catch((t=>{e("SET_ERROR",t.code)}))},async checkAuth({commit:e,state:t}){e("SET_AUTH",(0,Ze.v0)()),(0,Ze.Aj)(t.auth,(t=>{e("SET_IS_LOGGED",!!t)}))},async authLogout({state:e}){(0,Ze.w7)(e.auth).then((()=>{Re.push("/")}))}},getters:{}};var Ye=Xe,Be=(0,v.MT)({modules:{notes:Ke,auth:Ye}});(0,o.ri)(L).use(Be).use(Re).mount("#app")}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,a){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],s=e[u][1],a=e[u][2];for(var i=!0,l=0;l<o.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(i=!1,a<r&&(r=a));if(i){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,s,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,a,r=o[0],i=o[1],l=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(l)var u=l(n)}for(t&&t(o);c<r.length;c++)a=r[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},o=self["webpackChunkvue_notes"]=self["webpackChunkvue_notes"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(1334)}));o=n.O(o)})();
//# sourceMappingURL=app.d16e35b0.js.map